# Configuration principale Netlify

# Servir les fichiers statiques d'ECLA directement (pas de redirect)
[[redirects]]
  from = "/analyse/ECLA/static/*"
  to = "/analyse/ECLA/static/:splat"
  status = 200

[[redirects]]
  from = "/analyse/ECLA/data/*"
  to = "/analyse/ECLA/data/:splat"
  status = 200

# Route pour l'application ECLA (SPA routing)
[[redirects]]
  from = "/analyse/ECLA/*"
  to = "/analyse/ECLA/index.html"
  status = 200

[[redirects]]
  from = "/analyse/ECLA"
  to = "/analyse/ECLA/index.html"
  status = 200

# Redirection des rapports vers authentification
[[redirects]]
  from = "/reports/*"
  to = "/.netlify/functions/verify-auth"
  status = 200
  force = true
  conditions = {Role = ["!authenticated"]}

# Règle par défaut pour l'application principale
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[functions]
  directory = "functions"