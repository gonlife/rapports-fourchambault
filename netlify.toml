# Configuration principale Netlify

# Route publique pour ECLA (SANS authentification)
[[redirects]]
  from = "/analyse/ECLA/*"
  to = "/analyse/ECLA/index.html"
  status = 200

[[redirects]]
  from = "/analyse/ECLA"
  to = "/analyse/ECLA/index.html"
  status = 200

# Redirection des rapports vers une fonction d'authentification
[[redirects]]
  from = "/reports/*"
  to = "/.netlify/functions/verify-auth"
  status = 200
  force = true
  conditions = {Role = ["!authenticated"]}

# Règle par défaut pour l'application principale
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[functions]
  directory = "functions"